<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05 PictureMemoMuch Web</title>

    <link rel="stylesheet" href="style.css" />

    <!-- CSVパース用 -->
    <script src="libs/papaparse.min.js"></script>

    <!-- ★ ZIP生成用（必須・app.jsより前） -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- メインロジック -->
    <script defer src="app.js"></script>
</head>

<body>

    <h1>PictureMemoMuch（Web版）</h1>

    <!-- ===============================
         1. 写真CSVアップロード
         =============================== -->
    <section class="block">
        <h2>① 写真CSVファイルを選択</h2>
        <input type="file" id="exifFile" accept=".csv" />
        <p id="status" class="status">未選択</p>
    </section>

    <!-- ===============================
         2. メモTXTアップロード
         =============================== -->
    <section class="block">
        <h2>② メモTXTファイルを選択</h2>
        <input type="file" id="memoFile" accept=".txt" multiple />
    </section>

    <!-- ===============================
         3. マッチング設定
         =============================== -->
    <section class="block">
        <h2>③ マッチング設定</h2>

        <div class="inlineRow">
            <label>距離しきい値（m）</label>
            <input type="number" id="distInput" class="halfInput" value="20" />
            <label class="chkLabel">
                <input type="checkbox" id="ignoreDistance"> 距離を無視
            </label>
        </div>

        <div class="inlineRow">
            <label>時間しきい値（秒）</label>
            <input type="number" id="timeInput" class="halfInput" value="300" />
            <label class="chkLabel">
                <input type="checkbox" id="ignoreTime"> 時間を無視
            </label>
        </div>

        <fieldset class="modeBox">
            <legend>判定方式</legend>
            <label><input type="radio" name="matchMode" value="OR" checked> OR（距離 or 時間）</label>
            <label><input type="radio" name="matchMode" value="AND"> AND（距離 and 時間）</label>
        </fieldset>

        <h3>期間指定</h3>

        <div class="dateRow">
            <span class="dateLabel">開始</span>
            <input type="date" id="startDate" class="dateInput" />

            <select id="startHour" class="timeSel">
                <option>00</option><option>01</option><option>02</option><option>03</option>
                <option>04</option><option>05</option><option>06</option><option>07</option>
                <option>08</option><option>09</option><option>10</option><option>11</option>
                <option>12</option><option>13</option><option>14</option><option>15</option>
                <option>16</option><option>17</option><option>18</option><option>19</option>
                <option>20</option><option>21</option><option>22</option><option>23</option>
            </select>

            <select id="startMin" class="timeSel">
                <option>00</option><option>01</option><option>02</option><option>03</option>
                <option>04</option><option>05</option><option>06</option><option>07</option>
                <option>08</option><option>09</option><option>10</option><option>11</option>
                <option>12</option><option>13</option><option>14</option><option>15</option>
                <option>16</option><option>17</option><option>18</option><option>19</option>
                <option>20</option><option>21</option><option>22</option><option>23</option>
                <option>24</option><option>25</option><option>26</option><option>27</option>
                <option>28</option><option>29</option><option>30</option><option>31</option>
                <option>32</option><option>33</option><option>34</option><option>35</option>
                <option>36</option><option>37</option><option>38</option><option>39</option>
                <option>40</option><option>41</option><option>42</option><option>43</option>
                <option>44</option><option>45</option><option>46</option><option>47</option>
                <option>48</option><option>49</option><option>50</option><option>51</option>
                <option>52</option><option>53</option><option>54</option><option>55</option>
                <option>56</option><option>57</option><option>58</option><option>59</option>
            </select>
        </div>

        <div class="dateRow">
            <span class="dateLabel">終了</span>
            <input type="date" id="endDate" class="dateInput" />

            <select id="endHour" class="timeSel">
                <option>00</option><option>01</option><option>02</option><option>03</option>
                <option>04</option><option>05</option><option>06</option><option>07</option>
                <option>08</option><option>09</option><option>10</option><option>11</option>
                <option>12</option><option>13</option><option>14</option><option>15</option>
                <option>16</option><option>17</option><option>18</option><option>19</option>
                <option>20</option><option>21</option><option>22</option><option>23</option>
            </select>

            <select id="endMin" class="timeSel">
                <option>00</option><option>01</option><option>02</option><option>03</option>
                <option>04</option><option>05</option><option>06</option><option>07</option>
                <option>08</option><option>09</option><option>10</option><option>11</option>
                <option>12</option><option>13</option><option>14</option><option>15</option>
                <option>16</option><option>17</option><option>18</option><option>19</option>
                <option>20</option><option>21</option><option>22</option><option>23</option>
                <option>24</option><option>25</option><option>26</option><option>27</option>
                <option>28</option><option>29</option><option>30</option><option>31</option>
                <option>32</option><option>33</option><option>34</option><option>35</option>
                <option>36</option><option>37</option><option>38</option><option>39</option>
                <option>40</option><option>41</option><option>42</option><option>43</option>
                <option>44</option><option>45</option><option>46</option><option>47</option>
                <option>48</option><option>49</option><option>50</option><option>51</option>
                <option>52</option><option>53</option><option>54</option><option>55</option>
                <option>56</option><option>57</option><option>58</option><option>59</option>
            </select>
        </div>

    </section>

    <section class="block">
        <button id="runButton" class="mainButton">マッチングを実行</button>
    </section>

    <section class="block">
        <h2>④ 出力</h2>
        <a id="downloadLink" class="downloadLink" href="#" style="display:none;">
            👉 ZIPをダウンロード
        </a>
    </section>

</body>
</html>
