<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05 PictureMemoMuch Web</title>
    <link rel="stylesheet" href="style.css" />
    <script src="libs/papaparse.min.js"></script>
    <script defer src="app.js"></script>
</head>

<body>

    <h1>PictureMemoMuch（Web版）</h1>

    <!-- ===============================
         1. 写真CSVアップロード
         =============================== -->
    <section class="block">
        <h2>① 写真CSVファイルを選択</h2>

        <!-- app.js が要求する ID -->
        <input type="file" id="exifFile" accept=".csv"
            onchange="document.getElementById('exifStatus').textContent = this.files[0]?.name ?? '未選択';">

        <!-- ファイル選択状態を表示する要素を追加 -->
        <p id="exifStatus" class="status">未選択</p>
    </section>

    <!-- ===============================
         2. メモTXTアップロード
         =============================== -->
    <section class="block">
        <h2>② メモTXTファイルを選択</h2>

        <!-- app.js が要求する ID -->
        <input type="file" id="memoFile" accept=".txt"
            onchange="document.getElementById('memoStatus').textContent = this.files[0]?.name ?? '未選択';">

        <p id="memoStatus" class="status">未選択</p>
    </section>

    <!-- ===============================
         3. マッチング設定
         =============================== -->
    <section class="block">
        <h2>③ マッチング設定</h2>

        <label>距離しきい値（m）</label>
        <input type="number" id="distInput" value="20" />

        <label>時間しきい値（秒）</label>
        <input type="number" id="timeInput" value="300" />

        <fieldset class="modeBox">
            <legend>判定方式</legend>

            <label>
                <input type="radio" name="matchMode" value="OR" checked>
                OR（距離 or 時間）
            </label><br>

            <label>
                <input type="radio" name="matchMode" value="AND">
                AND（距離 and 時間）
            </label>
        </fieldset>

        <!-- ★ app.js が参照する ignoreDistance / ignoreTime を追加 -->
        <label>
            <input type="checkbox" id="ignoreDistance">
            距離判定を無視する
        </label><br>

        <label>
            <input type="checkbox" id="ignoreTime">
            時間判定を無視する
        </label>

        <h3>期間指定</h3>
        <label>開始日</label><input type="date" id="startDate" />
        <label>時</label><input type="number" id="startHour" value="00" min="00" max="23" />
        <label>分</label><input type="number" id="startMin" value="00" min="00" max="59" />

        <label>終了日</label><input type="date" id="endDate" />
        <label>時</label><input type="number" id="endHour" value="23" min="00" max="23" />
        <label>分</label><input type="number" id="endMin" value="59" min="00" max="59" />

    </section>

    <!-- ===============================
         4. 実行ボタン
         =============================== -->
    <section class="block">
        <button id="runButton" class="mainButton">マッチングを実行</button>
    </section>

    <!-- ===============================
         5. 出力
         =============================== -->
    <section class="block">
        <h2>④ 出力</h2>

        <a id="downloadLink" class="downloadLink"
           href="#" download="matched.csv" style="display:none;">
            👉 CSVをダウンロード
        </a>

        <!-- app.js が利用するステータス表示領域 -->
        <p id="status" class="status"></p>
    </section>

</body>
</html>
